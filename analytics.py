import os\nimport json\nfrom googleapiclient.discovery import build\n\n# Set up the YouTube API\napi_key = os.environ['YOUTUBE_API_KEY']\nyoutube = build('youtube', 'v3', developerKey=api_key)\n\n# Define a function to get video analytics\ndef get_video_analytics(video_id):\n    # Create a resource object for the videos.list method of the YouTube API\n    request = youtube.videos().list(part='statistics', id=video_id)\n\n    # Execute the request and get the response\n    response = request.execute()\n\n    # Get the view count, watch time, CTR, and retention\n    view_count = response['items'][0]['statistics']['viewCount']\n    watch_time = response['items'][0]['statistics']['watchTimeSeconds']\n    ctr = response['items'][0]['statistics']['averageRating']\n    retention = response['items'][0]['statistics']['averageViewPercentage']\n\n    # Return the analytics\n    return {'view_count': view_count, 'watch_time': watch_time, 'ctr': ctr, 'retention': retention}\n\n\n# Define a function to get channel analytics\ndef get_channel_analytics(channel_id):\n    # Create a resource object for the channels.list method of the YouTube API\n    request = youtube.channels().list(part='statistics', id=channel_id)\n\n    # Execute the request and get the response\n    response = request.execute()\n\n    # Get the view count, watch time, CTR, and retention\n    view_count = response['items'][0]['statistics']['viewCount']\n    watch_time = response['items'][0]['statistics']['watchTimeSeconds']\n    ctr = response['items'][0]['statistics']['averageRating']\n    retention = response['items'][0]['statistics']['averageViewPercentage']\n\n    # Return the analytics\n    return {'view_count': view_count, 'watch_time': watch_time, 'ctr': ctr, 'retention': retention}\n\n\n# Define a function to get video and channel analytics\ndef get_video_and_channel_analytics(video_id, channel_id):\n    # Get the video analytics\n    video_analytics = get_video_analytics(video_id)\n\n    # Get the channel analytics\n    channel_analytics = get_channel_analytics(channel_id)\n\n    # Return the video and channel analytics\n    return {'video_analytics': video_analytics, 'channel_analytics': channel_analytics}